<!DOCTYPE html>
<html>
<head>
    <title>Test Campaigns & Sponsors</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .item { padding: 10px; margin: 5px 0; background: #f5f5f5; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>API Test - Campaigns & Sponsors</h1>
    
    <div class="section">
        <h2>Campaigns</h2>
        <div id="campaigns-result"></div>
    </div>
    
    <div class="section">
        <h2>Sponsors</h2>
        <div id="sponsors-result"></div>
    </div>

    <script>
        const API_BASE = 'https://bxmdzcxejcxbinghtyfw.supabase.co/functions/v1/admin-api';
        const token = localStorage.getItem('adminToken') || 'session_test';

        async function testAPI() {
            // Test campaigns
            try {
                const campaignsRes = await fetch(`${API_BASE}/campaigns`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const campaignsData = await campaignsRes.json();
                document.getElementById('campaigns-result').innerHTML = 
                    `<div class="success">✅ Status: ${campaignsRes.status}</div>
                     <div>Count: ${campaignsData.campaigns?.length || 0}</div>
                     <pre>${JSON.stringify(campaignsData, null, 2)}</pre>`;
            } catch (e) {
                document.getElementById('campaigns-result').innerHTML = 
                    `<div class="error">❌ Error: ${e.message}</div>`;
            }

            // Test sponsors
            try {
                const sponsorsRes = await fetch(`${API_BASE}/sponsors`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const sponsorsData = await sponsorsRes.json();
                document.getElementById('sponsors-result').innerHTML = 
                    `<div class="success">✅ Status: ${sponsorsRes.status}</div>
                     <div>Count: ${sponsorsData.sponsors?.length || 0}</div>
                     <pre>${JSON.stringify(sponsorsData, null, 2)}</pre>`;
            } catch (e) {
                document.getElementById('sponsors-result').innerHTML = 
                    `<div class="error">❌ Error: ${e.message}</div>`;
            }
        }

        testAPI();
    </script>
</body>
</html>
